!function t(e,n,o){function r(i,s){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return r(n||t)},l,l.exports,t,e,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(t,e,n){(function(o){!function(t){"object"==typeof n&&void 0!==e?e.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this).transitions=t()}(function(){return function e(n,o,r){function a(s,c){if(!o[s]){if(!n[s]){var p="function"==typeof t&&t;if(!c&&p)return p(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[s]={exports:{}};n[s][0].call(u.exports,function(t){return a(n[s][1][t]||t)},u,u.exports,e,n,o,r)}return o[s].exports}for(var i="function"==typeof t&&t,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,e,n){function o(t,e){e.style.transition=`all ${t.easing} ${t.time}ms`}function r(t){return e=>{var n="function"==typeof t?t():t;return Object.assign({},c,n)}}function a(t,e){return function(n){const o=r(n),a=(...t)=>e(o(),...t);return function(e){const n=e.data[t]||(t=>{});return e.data[t]=((...t)=>{n(...t),a(...t)}),e}}}function i(t){const e=+t.getAttribute("data-t-x"),n=+t.getAttribute("data-t-y"),{left:o,top:r}=t.getBoundingClientRect();return t.setAttribute("data-t-x",o),t.setAttribute("data-t-y",r),e?[e-o,n-r]:[null,null]}function s(...t){const e=[...t],n=e.length;var o=e[0];if(1===n)return o;var r;return r=n>2?s(...e.slice(1)):e[1],t=>o(r(t))}const c={name:"",time:0,delay:0,ready:0,easing:"",last:!0},p=a("onremove",(t,e,n)=>{const r=`${t.name}-leave`;e.style.transition="",e.style.transform="",e.classList.add(r);const a=getComputedStyle(e).getPropertyValue("transform"),[s,c,p,l,u,d]="none"===a?[1,0,0,1,0,0]:a.match(/^matrix\(([^\)]*)\)$/)[1].split(", ").map(t=>+t);e.classList.remove(r);const[f,h]=i(e);e.style.transform=`translate(${f}px, ${h}px)`,setTimeout(a=>{e.classList.add(r),e.style.transform=`matrix(${s}, ${c}, ${p}, ${l}, ${u+f}, ${d+h})`,o(t,e),t.last&&setTimeout(n,t.time)},t.delay)}),l=a("oncreate",(t,e)=>setTimeout(t=>i(e),t.ready)),u=a("oncreate",(t,e)=>{const n=`${t.name}-enter`;e.classList.add(n),setTimeout(r=>{o(t,e),e.classList.remove(n)},t.delay)}),d=a("oncreate",(t,e)=>o(t,e)),f=a("onupdate",(t,e)=>{const[n,r]=i(e);e.style.transition="",e.style.transform=`translate(${n}px, ${r}px)`,setTimeout(n=>{o(t,e),e.style.transition=`all ${t.easing} ${t.time}ms`,e.style.transform="translate(0,0)",setTimeout(t=>{e.style.transform="",e.style.transition=""},t.time)})}),h=a("oncreate",(t,e)=>setTimeout(t=>i(e),t.ready));e.exports={change:d,enter:u,leave:t=>s(l(t),p(t)),move:t=>s(h(t),f(t)),group:function(t){return e=>(e.children.forEach(t),e)},combine:s}},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){!function(t,o){"object"==typeof n&&void 0!==e?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o(t.hyperapp=t.hyperapp||{})}(this,function(t){"use strict";t.h=function(t,e){for(var n,o=[],r=[],a=arguments.length;a-- >2;)o[o.length]=arguments[a];for(;o.length;)if(Array.isArray(n=o.pop()))for(a=n.length;a--;)o[o.length]=n[a];else null!=n&&!0!==n&&!1!==n&&("number"==typeof n&&(n+=""),r[r.length]=n);return"string"==typeof t?{tag:t,data:e||{},children:r}:t(e,r)},t.app=function(t){function e(t,n,i){Object.keys(n||[]).map(function(s){var c=n[s],p=i?i+"."+s:s;"function"==typeof c?t[s]=function(t){var e=c(h,m,o("action",{name:p,data:t}).data,o);if(null==e||"function"==typeof e.then)return e;r(h=a(h,o("update",e)),v)}:e(t[s]||(t[s]={}),c,p)})}function n(){r(h,v),o("loaded")}function o(t,e){return(g[t]||[]).map(function(t){var n=t(h,m,e,o);null!=n&&(e=n)}),e}function r(e,n){f=u(t.root||(t.root=document.body),f,d,d=o("render",n)(e,m))}function a(t,e){var n={};if("object"!=typeof e||Array.isArray(e))return e;for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function i(t,e){if("string"==typeof t)n=document.createTextNode(t);else{for(var n=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),o=0;o<t.children.length;)n.appendChild(i(t.children[o++],e));for(var o in t.data)"oncreate"===o?t.data[o](n):s(n,o,t.data[o])}return n}function s(t,e,n,o){if("key"===e);else if("style"===e)for(var r in a(o,n=n||{}))t.style[r]=n[r]||"";else{try{t[e]=n}catch(t){}"function"!=typeof n&&(n?t.setAttribute(e,n):t.removeAttribute(e))}}function c(t,e,n){for(var o in a(e,n)){var r=n[o],i="value"===o||"checked"===o?t[o]:e[o];"onupdate"===o&&r?r(t):r!==i&&s(t,o,r,i)}}function p(t){if(t&&(t=t.data))return t.key}function l(t,e,n){function o(){t.removeChild(e)}(n.data&&n.data.onremove||o)(e,o)}function u(t,e,n,o){if(null==n)e=t.insertBefore(i(o),e);else if(o.tag&&o.tag===n.tag){c(e,n.data,o.data);for(var r=o.children.length,a=n.children.length,s={},d=[],f={},h=0;h<a;h++)m=e.childNodes[h],d[h]=m,null!=(k=p(g=n.children[h]))&&(s[k]=[m,g]);for(var h=0,v=0;v<r;){var m=d[h],g=n.children[h],y=o.children[v];if(f[k=p(g)])h++;else{var x=p(y),w=s[x]||[];null==x?(null==k&&(u(e,m,g,y),v++),h++):(k===x?(u(e,w[0],w[1],y),h++):w[0]?(e.insertBefore(w[0],m),u(e,w[0],w[1],y)):u(e,m,null,y),v++,f[x]=y)}}for(;h<a;){var k=p(g=n.children[h]);null==k&&l(e,d[h],g),h++}for(var h in s){var b=(w=s[h])[1];f[b.data.key]||l(e,w[0],b)}}else o!==n&&(h=e,t.replaceChild(e=i(o),h));return e}for(var d,f,h={},v=t.view,m={},g={},y=-1,x=t.mixins||[];y<x.length;y++){var w=x[y]?x[y](t):t;null!=w.mixins&&w!==t&&(x=x.concat(w.mixins)),null!=w.state&&(h=a(h,w.state)),e(m,w.actions),Object.keys(w.events||[]).map(function(t){g[t]=(g[t]||[]).concat(w.events[t])})}"l"!==document.readyState[0]?n():addEventListener("DOMContentLoaded",n)},t.Router=function(t,e){function n(n){for(var o,r={},a=0,i=t.view.length;a<i;a++){var s=t.view[a][0],c=[];o||n.replace(RegExp("*"===s?"."+s:"^"+s.replace(/\//g,"\\/").replace(/:([\w]+)/g,function(t,e){return c.push(e),"([-\\.\\w]+)"})+"/?$","g"),function(){for(var n=1;n<arguments.length-2;)r[c.shift()]=arguments[n++];o=s,e=t.view[a][1]})}return{match:o,params:r}}return{state:{router:n(location.pathname)},actions:{router:{match:function(t,e,o,r){return{router:r("route",n(o))}},go:function(t,e,n){history.pushState({},"",n),e.router.match(n.split("?")[0])}}},events:{loaded:function(t,e){function n(){e.router.match(location.pathname)}n(),addEventListener("popstate",n)},render:function(){return e}}}}})},{}],3:[function(t,e,n){e.exports=((t,e)=>({tag:"div",data:{class:"app-container"},children:e}))},{}],4:[function(t,e,n){e.exports=(({cls:t,action:e},n)=>{const o=t=>{t.preventDefault(!0),t.currentTarget.classList.add("active"),e()};return{tag:"button",data:{class:t,ontouchstart:o,onmousedown:o},children:n}})},{}],5:[function(t,e,n){const o=t("./icon");e.exports=(({direction:t})=>o({name:"chevron",effect:"back"===t?"hflip":""}))},{"./icon":6}],6:[function(t,e,n){const{h:o}=t("hyperapp"),r={chevron:o("svg",{width:"100%",height:"100%",viewBox:"-10 -20 20 40",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("path",{d:"M -7 -17 L 7 0 L -7 17","stroke-linecap":"butt","stroke-width":"3"}),"\n    "]),noFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n    "]),veryHappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-18",y1:"-10",x2:"-8",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"18",y1:"-10",x2:"8",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("path",{d:"M -18 10 C -15 25 15 25 18 10","stroke-linecap":"round",fill:"transparent","stroke-width":"5"}),"\n    "]),happyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("path",{d:"M -15 15 C 0 20 0 20 15 15","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),uncertainFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-10",x2:"10",y1:"18",y2:"18","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),unhappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("path",{d:"M -15 15 C 0 10 0 10 15 15","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),veryUnhappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-15",y1:"-7",x2:"-8",y2:"-15","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"-8",y1:"-15",x2:"-15",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"15",y1:"-7",x2:"8",y2:"-15","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"8",y1:"-15",x2:"15",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("path",{d:"M -18 20 C -15 5 15 5 18 20","stroke-linecap":"round",fill:"transparent","stroke-width":"5"}),"\n    "])};e.exports=(({name:t,effect:e})=>o("div",{className:"icon "+e},[r[t]]))},{hyperapp:2}],7:[function(t,e,n){const{h:o}=t("hyperapp"),r=t("./button"),a=t("./chevron");e.exports=(({goTo:t,target:e,direction:n,text:i,extra:s})=>r({cls:`nav-button ${n}`,action:o=>t([e,n])},[a({direction:n}),o("p",{className:"button-text-extra"},[s]),o("p",{className:"button-text-main"},[i])]))},{"./button":4,"./chevron":5,hyperapp:2}],8:[function(t,e,n){const o=t("./navbutton"),{combine:r,enter:a,leave:i}=t("hyperapp-transitions"),s={direction:null},c=t=>({name:"slide-"+s.direction,easing:"ease-in-out",time:400,ready:420}),p=r(a(c),i(c));e.exports=(({name:t,direction:e,next:n},r)=>(s.direction=e,p({tag:"div",data:{class:"page",key:t},children:[].concat(r,o(n))})))},{"./navbutton":7,"hyperapp-transitions":1}],9:[function(t,e,n){e.exports=((t,e)=>({tag:"div",data:{class:"panel"},children:e}))},{}],10:[function(t,e,n){const o=({sum:t,count:e})=>0===e?"":""+Math.round(10*t/e)/10;e.exports=(t=>({tag:"p",data:{class:"result-display"},children:[o(t)]}))},{}],11:[function(t,e,n){const{h:o}=t("hyperapp"),r=t("./icon"),a=[{value:0,icon:"noFace",label:"No Vote",extra:"I don't want to participate."},{value:5,icon:"veryHappyFace",label:"Very Happy",extra:"It should always be this way!"},{value:4,icon:"happyFace",label:"Happy",extra:"It can always get better!"},{value:3,icon:"uncertainFace",label:"Don't know",extra:"Meh... / Mixed feelings"},{value:2,icon:"unhappyFace",label:"Unhappy",extra:"A lot needs to change!"},{value:1,icon:"veryUnhappyFace",label:"Very Unhappy",extra:"Why even bother..."}];e.exports=(({value:t,set:e})=>o("ul",{className:"option-selector"},["\n    ",a.map(({value:n,icon:a,label:i,extra:s})=>o("li",{onmousedown:t=>e(n),ontouchstart:t=>e(n),className:n===t?"active":""},["\n        ",r({name:a}),"\n        ",o("p",{className:"label"},[i]),"\n        ",o("p",{className:"extra"},[s]),"\n    "])),"\n"]))},{"./icon":6,hyperapp:2}],12:[function(t,e,n){const{app:o}=t("hyperapp"),r=t("./components/app-container"),a=t("./pages");o({state:{votes:{current:0,sum:0,count:0},page:{current:"initial",direction:null}},actions:{goTo(t,e,[n,o],r){return r("goTo:"+n),t.page={current:n,direction:o},t},votes:{set(t,e,n){return t.votes.current=n,t},commit(t){return 0===t.votes.current?t:(t.votes.sum=t.votes.sum+t.votes.current,t.votes.count=t.votes.count+1,t.votes.current=0,t)},reset(t){return t.votes.sum=0,t.votes.count=0,t.votes.current=0,t}}},events:{"goTo:reset":(t,e)=>setTimeout(e.votes.reset,0),"goTo:pass":(t,e)=>setTimeout(e.votes.commit,0)},view:(t,e)=>r({},[a[t.page.current](t,e)])})},{"./components/app-container":3,"./pages":13,hyperapp:2}],13:[function(t,e,n){const o={initial:t("./initial"),start:t("./start"),vote:t("./vote"),pass:t("./pass"),result:t("./result"),reset:t("./reset")};e.exports=o},{"./initial":14,"./pass":15,"./reset":16,"./result":17,"./start":18,"./vote":19}],14:[function(t,e,n){const o=t("../components/panel"),r=t("../components/page");e.exports=((t,e)=>r({name:"initial",direction:t.page.direction,next:{goTo:e.goTo,target:"start",direction:"forward",extra:"Tap here to...",text:"Start"}},[o({},["Happiness Index Calculator"])]))},{"../components/page":8,"../components/panel":9}],15:[function(t,e,n){const o=t("../components/panel"),r=t("../components/navbutton"),a=t("../components/page");e.exports=((t,e)=>a({name:"pass",direction:t.page.direction,next:{goTo:e.goTo,target:"vote",direction:"back",extra:"Are you the next person? Tap here to...",text:"Vote"}},[r({goTo:e.goTo,target:"result",direction:"forward",extra:"Has everyone voted? Tap here to...",text:"Check Result"}),o({},["Thank you! Now, please hand the phone to the next person."])]))},{"../components/navbutton":7,"../components/page":8,"../components/panel":9}],16:[function(t,e,n){const o=t("../components/panel"),r=t("../components/result"),a=t("../components/page");e.exports=((t,e)=>a({name:"reset",direction:t.page.direction,next:{goTo:e.goTo,target:"start",direction:"back",extra:"Tap here to...",text:"Start again"}},[o({},["Votes cleared from memory",r(t.votes)])]))},{"../components/page":8,"../components/panel":9,"../components/result":10}],17:[function(t,e,n){const o=t("../components/result"),r=t("../components/page"),a=t("../components/panel");e.exports=((t,e)=>r({name:"result",direction:t.page.direction,next:{goTo:e.goTo,target:"reset",direction:"forward",extra:"Need to do it again? Tap here to...",text:"Reset Votes"}},[a({},["Happiness Index",o(t.votes)])]))},{"../components/page":8,"../components/panel":9,"../components/result":10}],18:[function(t,e,n){const o=t("../components/page"),r=t("../components/panel");e.exports=((t,e)=>o({name:"start",direction:t.page.direction,next:{goTo:e.goTo,target:"vote",direction:"forward",extra:"When you're ready, tap here to...",text:"Vote"}},[r({},["Please hand the phone to the first person to vote."])]))},{"../components/page":8,"../components/panel":9}],19:[function(t,e,n){const o=t("../components/voter"),r=t("../components/panel"),a=t("../components/page");e.exports=((t,e)=>a({name:"vote",direction:t.page.direction,next:{goTo:e.goTo,target:"pass",direction:"forward",extra:"Make your selection, then tap here to...",text:"Cast Vote"}},[r({},["How happy are you about your job?"]),o({value:t.votes.current,set:e.votes.set})]))},{"../components/page":8,"../components/panel":9,"../components/voter":11}]},{},[12]);
