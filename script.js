!function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){var n=e[a][1][t];return r(n||t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){!function(t,o){"object"==typeof n&&void 0!==e?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o(t.picodom=t.picodom||{})}(this,function(t){"use strict";function e(t,n,r,c){if(null==r)n=t.insertBefore(o(c),n);else if(c.tag&&c.tag===r.tag){i(n,r.data,c.data);for(var u=c.children.length,p=r.children.length,l={},d=[],f={},h=0;h<p;h++)v=n.childNodes[h],d[h]=v,null!=(k=a(g=r.children[h]))&&(l[k]=[v,g]);for(var h=0,m=0;m<u;){var v=d[h],g=r.children[h],x=c.children[m];if(f[k=a(g)])h++;else{var y=a(x),w=l[y]||[];null==y?(null==k&&(e(n,v,g,x),m++),h++):(k===y?(e(n,w[0],w[1],x),h++):w[0]?(n.insertBefore(w[0],v),e(n,w[0],w[1],x)):e(n,v,null,x),m++,f[y]=x)}}for(;h<p;){var k=a(g=r.children[h]);null==k&&s(n,d[h],g),h++}for(var h in l){var b=(w=l[h])[1];f[b.data.key]||s(n,w[0],b)}}else c!==r&&(h=n,t.replaceChild(n=o(c),h));return n}function n(t,e){var n={};if("object"!=typeof e||Array.isArray(e))return e;for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function o(t,e){if("string"==typeof t)n=document.createTextNode(t);else{for(var n=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),i=0;i<t.children.length;)n.appendChild(o(t.children[i++],e));for(var i in t.data)"oncreate"===i?t.data[i](n):r(n,i,t.data[i])}return n}function r(t,e,o,r){if("key"===e);else if("style"===e)for(var i in n(r,o=o||{}))t.style[i]=o[i]||"";else{try{t[e]=o}catch(t){}"function"!=typeof o&&(o?t.setAttribute(e,o):t.removeAttribute(e))}}function i(t,e,o){for(var i in n(e,o)){var a=o[i],s="value"===i||"checked"===i?t[i]:e[i];"onupdate"===i?a(t):a!==s&&r(t,i,a,s)}}function a(t){if(t&&(t=t.data))return t.key}function s(t,e,n){function o(){t.removeChild(e)}(n.data&&n.data.onremove||o)(e,o)}t.h=function(t,e){for(var n,o=[],r=[],i=arguments.length;i-- >2;)o[o.length]=arguments[i];for(;o.length;)if(Array.isArray(n=o.pop()))for(i=n.length;i--;)o[o.length]=n[i];else null!=n&&!0!==n&&!1!==n&&("number"==typeof n&&(n+=""),r[r.length]=n);return"string"==typeof t?{tag:t,data:e||{},children:r}:t(e,r)},t.patch=e})},{}],2:[function(t,e,n){const{h:o,render:r}=t("./render"),{renderer:i}=t("./renderer");e.exports={h:o,render:r,renderer:i}},{"./render":3,"./renderer":4}],3:[function(t,e,n){const{h:o,patch:r}=t("picodom");e.exports={h:o,render:function(t,e,n,o){return e=e||document.body,[e,r(e,n,o,t),t]}}},{picodom:1}],4:[function(t,e,n){const{h:o,render:r}=t("./render");e.exports={h:o,renderer:function(t,e){var n=[e];return e=>n=r(t(),...n)}}},{"./render":3}],5:[function(t,e,n){class o{constructor(){this.listeners=[]}on(t){this.listeners.push(t)}off(t){const e=this.listeners.indexOf(t);this.listeners.splice(e,1)}trigger(t){this.listeners.forEach(e=>e(t))}}e.exports=o},{}],6:[function(t,e,n){const o=t("./Event");class r{constructor(t){this._updateEvent=new o,this._state=t}getter(t){return function(...e){return t(this._state,...e)}.bind(this)}setter(t,e){return function(...n){this._state=t(this._state,...n),this._updateEvent.trigger(e)}.bind(this)}onupdate(t){this._updateEvent.on(t)}}e.exports=r},{"./Event":5}],7:[function(t,e,n){function o(t,e){return function(n){const o=n.data[t];return n.data[t]=function(t,n){o&&o(t),e(t,n)},n}}function r(t,e,n){return e?r(o=>({name:t,time:e,delay:n})):"function"!=typeof t?r(e=>t):o("oncreate",function(e){const{name:n,time:o,delay:r}=t(),i=n+"-enter",a=n+"-run";e.classList.add(i),setTimeout(t=>{e.classList.add(a);e.classList.remove(i);setTimeout(t=>{e.classList.remove(a)},o)},r||0)})}function i(t,e,n){return e?i(o=>({name:t,time:e,delay:n})):"function"!=typeof t?i(e=>t):o("onremove",function(e,n){const{name:o,time:r,delay:i}=t(),a=o+"-leave",s=o+"-run";setTimeout(t=>{e.classList.add(s);e.classList.add(a);setTimeout(function(){e.classList.remove(s),n()},r)},i||0)})}function a(t){return"function"!=typeof t?a(e=>t):function(e){const n=t();return e.data.class+=" "+n+"-run",e}}e.exports={enter:r,leave:i,both:function(t,e,n){const o=r(t,e,n),a=i(t,e,n);return t=>o(a(t))},change:a}},{}],8:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r={chevron:o("svg",{width:"100%",height:"100%",viewBox:"-10 -20 20 40",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("path",{d:"M -7 -17 L 7 0 L -7 17","stroke-linecap":"butt","stroke-width":"3"}),"\n    "]),noFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n    "]),veryHappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-18",y1:"-10",x2:"-8",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"18",y1:"-10",x2:"8",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("path",{d:"M -18 10 C -15 25 15 25 18 10","stroke-linecap":"round",fill:"transparent","stroke-width":"5"}),"\n    "]),happyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("path",{d:"M -15 15 C 0 20 0 20 15 15","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),uncertainFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-10",x2:"10",y1:"18",y2:"18","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),unhappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"-15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("circle",{cx:"15",cy:"-8",r:"2",fill:"transparent","stroke-width":"5"}),"\n        ",o("path",{d:"M -15 15 C 0 10 0 10 15 15","stroke-linecap":"round","stroke-width":"5"}),"\n    "]),veryUnhappyFace:o("svg",{width:"100%",height:"100%",viewBox:"-50 -50 100 100",xmlns:"http://www.w3.org/2000/svg"},["\n        ",o("circle",{cx:"0",cy:"0",r:"40",fill:"transparent","stroke-width":"5"}),"\n        ",o("line",{x1:"-15",y1:"-7",x2:"-8",y2:"-15","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"-8",y1:"-15",x2:"-15",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"15",y1:"-7",x2:"8",y2:"-15","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("line",{x1:"8",y1:"-15",x2:"15",y2:"-18","stroke-linecap":"round","stroke-width":"5"}),"\n        ",o("path",{d:"M -18 20 C -15 5 15 5 18 20","stroke-linecap":"round",fill:"transparent","stroke-width":"5"}),"\n    "])};e.exports=(({name:t,effect:e})=>o("div",{className:"icon "+e},[r[t]]))},{"zx-app-utils/dom":2}],9:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r=t("./icon"),i=({page:t})=>o("div",{className:"app-container"},[t]),a=(t,e)=>o("div",{className:"panel"},[e]),s=({cls:t,active:e,activate:n},r)=>o("button",{ontouchstart:n,onmousedown:n,className:t+" "+(e?"active":"")},["\n        ",r,"\n    "]),c=({direction:t})=>r({name:"chevron",effect:"back"===t?"hflip":""});e.exports={AppContainer:i,Panel:a,Button:s,Chevron:c}},{"./icon":8,"zx-app-utils/dom":2}],10:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r=t("../model"),{Button:i,Chevron:a}=t("./misc");e.exports=(({target:t,text:e,extra:n,onGo:s})=>{const c=r.navigation.directionTo(t);return i({cls:`nav-button ${c}`,activate:e=>{e.currentTarget.classList.add("active");r.navigation.go(t);s&&s()}},[a({direction:c}),o("p",{className:"button-text-extra"},[n]),o("p",{className:"button-text-main"},[e])])})},{"../model":15,"./misc":9,"zx-app-utils/dom":2}],11:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r=t("zx-app-utils/transition"),i=t("../model"),a=t("./navbutton"),s=r.both(t=>({name:"slide-"+i.navigation.direction(),time:350}));e.exports=(({name:t,target:e,text:n,extra:r,onGo:i},c)=>s(o("div",{key:t,class:"page"},[].concat(c,a({target:e,text:n,extra:r,onGo:i})))))},{"../model":15,"./navbutton":10,"zx-app-utils/dom":2,"zx-app-utils/transition":7}],12:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r=t("../model");e.exports=(t=>o("p",{class:"result-display"},[r.votes.result()||""]))},{"../model":15,"zx-app-utils/dom":2}],13:[function(t,e,n){const{h:o}=t("zx-app-utils/dom"),r=t("../model"),i=t("./icon"),a=[{value:0,icon:"noFace",label:"No Vote",extra:"I don't want to participate."},{value:5,icon:"veryHappyFace",label:"Very Happy",extra:"It should always be this way!"},{value:4,icon:"happyFace",label:"Happy",extra:"It can always get better!"},{value:3,icon:"uncertainFace",label:"Don't know",extra:"Meh... / Mixed feelings"},{value:2,icon:"unhappyFace",label:"Unhappy",extra:"A lot needs to change!"},{value:1,icon:"veryUnhappyFace",label:"Very Unhappy",extra:"Why even bother..."}];e.exports=(t=>o("ul",{className:"option-selector"},["\n    ",a.map(({value:t,icon:e,label:n,extra:a})=>o("li",{onmousedown:e=>r.votes.set(t),ontouchstart:e=>r.votes.set(t),className:t===r.votes.get()?"active":""},["\n        ",i({name:e}),"\n        ",o("p",{className:"label"},[n]),"\n        ",o("p",{className:"extra"},[a]),"\n    "])),"\n"]))},{"../model":15,"./icon":8,"zx-app-utils/dom":2}],14:[function(t,e,n){const{renderer:o}=t("zx-app-utils/dom/renderer"),r=t("./model"),{AppContainer:i}=t("./components/misc"),a={initial:t("./pages/initial"),start:t("./pages/start"),vote:t("./pages/vote"),pass:t("./pages/pass"),result:t("./pages/result"),reset:t("./pages/reset")},s=t=>a[r.navigation.page()](),c=o(t=>i({page:s()}));r.store.onupdate(c),c()},{"./components/misc":9,"./model":15,"./pages/initial":16,"./pages/pass":17,"./pages/reset":18,"./pages/result":19,"./pages/start":20,"./pages/vote":21,"zx-app-utils/dom/renderer":4}],15:[function(t,e,n){function o(t,e){return"reset"===t&&"start"===e?"back":"pass"===t&&"vote"===e?"back":"forward"}const r=new(t("zx-app-utils/store"))({navigation:{current:"initial",previous:null},votes:{vote:0,sum:0,count:0}});e.exports={store:r,votes:{get:r.getter(t=>t.votes.vote),set:r.setter((t,e)=>{t.votes.vote=e;return t}),commit:r.setter(t=>{t.votes.sum+=t.votes.vote;t.votes.count+=1;t.votes.vote=0;return t}),result:r.getter(t=>{if(0===t.votes.count)return 0;return Math.round(10*t.votes.sum/t.votes.count)/10}),reset:r.setter(t=>{t.votes={vote:0,sum:0,count:0};return t})},navigation:{page:r.getter(t=>t.navigation.current),go:r.setter((t,e)=>{t.navigation.previous=t.navigation.current;t.navigation.current=e;return t}),direction:r.getter(t=>o(t.navigation.previous,t.navigation.current)),directionTo:r.getter((t,e)=>o(t.navigation.current,e))}}},{"zx-app-utils/store":6}],16:[function(t,e,n){const{Panel:o}=t("../components/misc"),r=t("../components/page");e.exports=(t=>r({name:"initial",target:"start",extra:"Tap here to...",text:"Start"},[o({},["Happiness Index Calculator"])]))},{"../components/misc":9,"../components/page":11}],17:[function(t,e,n){const{Panel:o}=t("../components/misc"),r=t("../components/navbutton"),i=t("../components/page");e.exports=(t=>i({name:"pass",target:"vote",extra:"Are you the next person? Tap here to...",text:"Vote"},[r({target:"result",extra:"Has everyone voted? Tap here to...",text:"Check Result"}),o({},["Thank you! Now, please hand the phone to the next person."])]))},{"../components/misc":9,"../components/navbutton":10,"../components/page":11}],18:[function(t,e,n){const{Panel:o}=t("../components/misc"),r=t("../components/result"),i=t("../components/page");e.exports=(t=>i({name:"reset",target:"start",extra:"Tap here to...",text:"Start again"},[o({},["Votes cleared from memory",r()])]))},{"../components/misc":9,"../components/page":11,"../components/result":12}],19:[function(t,e,n){const o=t("../model"),r=t("../components/result"),i=t("../components/page"),{Panel:a}=t("../components/misc");e.exports=(t=>i({name:"result",target:"reset",extra:"Need to do it again? Tap here to...",text:"Reset Votes",onGo:o.votes.reset},[a({},["Happiness Index",r()])]))},{"../components/misc":9,"../components/page":11,"../components/result":12,"../model":15}],20:[function(t,e,n){const o=t("../components/page"),{Panel:r}=t("../components/misc");e.exports=(t=>o({name:"start",target:"vote",extra:"When you're ready, tap here to...",text:"Vote"},[r({},["Please hand the phone to the first person to vote."])]))},{"../components/misc":9,"../components/page":11}],21:[function(t,e,n){const o=t("../model"),r=t("../components/voter"),{Panel:i}=t("../components/misc"),a=t("../components/page");e.exports=(t=>a({name:"vote",target:"pass",extra:"Make your selection, then tap here to...",text:"Cast Vote",onGo:o.votes.commit},[i({},["How happy are you about your job?"]),r()]))},{"../components/misc":9,"../components/page":11,"../components/voter":13,"../model":15}]},{},[14]);
