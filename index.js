!function(){"use strict";function t(t,n){var e,o=[];for(s=arguments.length;s-- >2;)c.push(arguments[s]);for(;c.length;)if(Array.isArray(e=c.pop()))for(s=e.length;s--;)c.push(e[s]);else null!=e&&!0!==e&&!1!==e&&o.push("number"==typeof e?e+="":e);return"string"==typeof t?{type:t,props:n||{},children:o}:t(n||{},o)}function n(t){t.parentNode&&t.parentNode.removeChild(t)}function e(t,n){n.style.transition=`all ${t.easing} ${t.time}ms`}function o(t){return n=>{var e="function"==typeof t?t():t;return Object.assign({},L,e)}}function a(t,n){return function(e){const a=o(e),r=t=>n(a(),t);return function(n){if(!n||!n.props)return;const e=n.props[t]||(t=>{});return n.props[t]=((...t)=>(e(...t),r(...t),()=>{})),n}}}function r(t){const n=+t.getAttribute("data-t-x"),e=+t.getAttribute("data-t-y"),{left:o,top:a}=t.getBoundingClientRect();return t.setAttribute("data-t-x",o),t.setAttribute("data-t-y",a),n?[n-o,e-a]:[null,null]}function i(...t){const n=[...t],e=n.length;var o=n[0];if(1===e)return o;var a;return a=e>2?i(...n.slice(1)):n[1],t=>o(a(t))}!function(t){if(t||window){var n=document.createElement("style");n.setAttribute("media","screen"),n.innerHTML=t,document.head.appendChild(n)}}(".slide-forward-leave,\n.slide-back-enter {\n  transform: translateX(-110%);\n}\n.slide-back-leave,\n.slide-forward-enter {\n  transform: translateX(110%);\n}\n.slide-forward-run,\n.slide-back-run {\n  transition: transform 0.35s ease-in-out;\n}\n*,\nul,\nli,\nbutton,\ninput,\nbody {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-family: Helvetica, Arial, sans-serif;\n  font-size: 17px;\n}\n@media (min-height: 500px) {\n  *,\n  ul,\n  li,\n  button,\n  input,\n  body {\n    font-size: 20px;\n  }\n}\n@media (min-height: 600px) {\n  *,\n  ul,\n  li,\n  button,\n  input,\n  body {\n    font-size: 25px;\n  }\n}\n@media (min-height: 800px) {\n  *,\n  ul,\n  li,\n  button,\n  input,\n  body {\n    font-size: 30px;\n  }\n}\n@media (min-height: 1000px) {\n  *,\n  ul,\n  li,\n  button,\n  input,\n  body {\n    font-size: 35px;\n  }\n}\n/*\n448px: 17px\n20px : 568\n667:  25px\n\n1024: \n*/\nhtml,\nbody,\n#app {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background: #aaa;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n.page {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n}\n.page .panel {\n  flex: 1 0 auto;\n  margin: 0.5em;\n  background: #eee;\n  border: 1px #bbbbbb solid;\n  padding: 0.5em;\n  color: #555;\n  text-shadow: 0px 1px 1px #ffffff;\n}\n.page button.nav-button {\n  flex: 0 0 auto;\n  position: relative;\n  height: 15%;\n  color: #fff;\n  background-color: #d6975c;\n  text-shadow: 0 0 1px #29190a;\n}\n.page button.nav-button.active {\n  background-color: #a36429;\n  text-shadow: #140c05;\n}\n.page button.nav-button .button-text-extra {\n  font-size: 0.6em;\n}\n.page button.nav-button .button-text-main {\n  text-transform: uppercase;\n  font-size: 1.2em;\n}\n.page button.nav-button.forward .icon {\n  filter: drop-shadow(0 0 1px #523214);\n  position: absolute;\n  top: 20%;\n  right: 0;\n  height: 60%;\n  width: 2em;\n}\n.page button.nav-button.forward .icon svg path,\n.page button.nav-button.forward .icon svg line,\n.page button.nav-button.forward .icon svg circle {\n  stroke: #fff;\n  fill: transparent;\n}\n.page button.nav-button.forward .icon.hflip svg {\n  transform: scale(-1, 1);\n}\n.page button.nav-button.back .icon {\n  filter: drop-shadow(0 0 1px #523214);\n  position: absolute;\n  top: 20%;\n  left: 0;\n  height: 60%;\n  width: 2em;\n}\n.page button.nav-button.back .icon svg path,\n.page button.nav-button.back .icon svg line,\n.page button.nav-button.back .icon svg circle {\n  stroke: #fff;\n  fill: transparent;\n}\n.page button.nav-button.back .icon.hflip svg {\n  transform: scale(-1, 1);\n}\nul.option-selector {\n  list-style-type: none;\n  text-indent: none;\n  display: flex;\n  flex-direction: column;\n  margin: 0.5em;\n  margin-top: 0;\n}\nul.option-selector li {\n  flex: 1 1 auto;\n  padding: 0.5em;\n  padding-left: 3em;\n  position: relative;\n  color: #fff;\n  background: #3cb8ea;\n  text-shadow: 0 0 1px #093c51;\n  border-bottom: 1px #81d1f1 solid;\n}\nul.option-selector li.active {\n  color: #ffffff;\n  background: #1381ad;\n  text-shadow: 0 0 1px #041a23;\n}\nul.option-selector li .icon {\n  filter: drop-shadow(0 0 1px #093c51);\n  position: absolute;\n  left: 0.5em;\n  top: 0.5em;\n  bottom: 0.5em;\n  width: 2em;\n}\nul.option-selector li .icon svg path,\nul.option-selector li .icon svg line,\nul.option-selector li .icon svg circle {\n  stroke: #fff;\n  fill: transparent;\n}\nul.option-selector li .icon.hflip svg {\n  transform: scale(-1, 1);\n}\nul.option-selector li .label {\n  font-size: 0.9em;\n}\nul.option-selector li .extra {\n  font-size: 0.65em;\n  font-style: italic;\n}\nul.option-selector li .extra:before {\n  content: '\"';\n}\nul.option-selector li .extra:after {\n  content: '\"';\n}\n.result-display {\n  color: #555;\n  font-size: 2.5em;\n  display: block;\n  width: 4em;\n  height: 4em;\n  border-radius: 2em;\n  border: 3px #555 solid;\n  background: #fff;\n  text-align: center;\n  line-height: 3.8em;\n  box-sizing: border-box;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 1em;\n}\n");var s,c=[],l={state:{current:0,sum:0,count:0},actions:{set:(t,n,e)=>({current:e}),commit:({current:t,sum:n,count:e})=>{if(0!==t)return{sum:n+t,count:e+1,current:0}},reset:t=>({sum:0,count:0,current:0})}},u={state:{current:"initial",direction:null},actions:{goTo:(t,n,[e,o])=>({current:e,direction:o})}},p=(n,e)=>t("div",{class:"app-container"},e),d=(n,e)=>t("div",{class:"panel"},e),f=function(n){return n.replace(/\s/g,"").split(",").map(n=>(e,o)=>"object"!=typeof e||Array.isArray(e)?t(n,{},e):t(n,e,o))};const[m]=f("button"),g=t=>n=>{n.preventDefault(!0),n.currentTarget.classList.add("active"),t()};var v=({cls:t,action:n},e)=>m({class:t,ontouchstart:g(n),onmousedown:g(n)},e);const[h,y,x,b,w]=f("div, svg, path, circle, line"),k=(t,n)=>(t.width="100%",t.height="100%",t.xmlns="http://www.w3.org/2000/svg",y(t,n)),T=t=>k({viewBox:"-50 -50 100 100"},t),[$,A,C]=(t=>t.map(t=>n=>(n.fill="transparent",n["stroke-width"]=5,n["stroke-linecap"]="round",t(n))))([b,w,x]),F={chevron:k({viewBox:"-10 -20 20 40"},[x({d:"M -7 -17 L 7 0 L -7 17","stroke-linecap":"butt","stroke-width":"3"})]),noFace:T([$({cx:0,cy:0,r:40})]),veryHappyFace:T([$({cx:0,cy:0,r:40}),A({x1:-18,y1:-10,x2:-8,y2:-18}),A({x1:18,y1:-10,x2:8,y2:-18}),C({d:"M -15 15 C 0 20 0 20 15 15"})]),happyFace:T([$({cx:0,cy:0,r:40}),$({cx:-15,cy:-8,r:2}),$({cx:15,cy:-8,r:2}),C({d:"M -15 15 C 0 20 0 20 15 15"})]),uncertainFace:T([$({cx:0,cy:0,r:40}),$({cx:-15,cy:-8,r:2}),$({cx:15,cy:-8,r:2}),A({x1:-8,y1:15,x2:8,y2:15})]),unhappyFace:T([$({cx:0,cy:0,r:40}),$({cx:-15,cy:-8,r:2}),$({cx:15,cy:-8,r:2}),C({d:"M -15 15 C 0 10 0 10 15 15"})]),veryUnhappyFace:T([$({cx:0,cy:0,r:40}),A({x1:-15,y1:-7,x2:-8,y2:-15}),A({x1:-8,y1:-15,x2:-15,y2:-18}),A({x1:15,y1:-7,x2:8,y2:-15}),A({x1:8,y1:-15,x2:15,y2:-18}),C({d:"M -18 20 C -15 5 15 5 18 20"})])};var V=({name:t,effect:n})=>h({class:`icon ${n}`},[F[t]]),z=({direction:t})=>V({name:"chevron",effect:"back"===t?"hflip":""}),H=({goTo:n,target:e,direction:o,text:a,extra:r,onGo:i})=>v({cls:`nav-button ${o}`,action:t=>{i&&i(),n([e,o])}},[z({direction:o}),t("p",{class:"button-text-extra"},[r]),t("p",{class:"button-text-main"},[a])]);const L={name:"",time:0,delay:0,ready:0,easing:"",last:!0},M=a("onremove",(t,o)=>{const a=`${t.name}-leave`;o.style.transition="",o.style.transform="",o.classList.add(a);const i=getComputedStyle(o).getPropertyValue("transform"),[s,c,l,u,p,d]="none"===i?[1,0,0,1,0,0]:i.match(/^matrix\(([^\)]*)\)$/)[1].split(", ").map(t=>+t);o.classList.remove(a);const[f,m]=r(o);o.style.transform=`translate(${f}px, ${m}px)`,setTimeout(r=>{o.classList.add(a),o.style.transform=`matrix(${s}, ${c}, ${l}, ${u}, ${p+f}, ${d+m})`,e(t,o),t.last&&setTimeout(t=>n(o),t.time)},t.delay)}),N=a("oncreate",(t,n)=>setTimeout(t=>r(n),t.ready)),B=a("oncreate",(t,n)=>{const o=`${t.name}-enter`;n.classList.add(o),setTimeout(a=>{e(t,n),n.classList.remove(o)},t.delay)}),I=a("oncreate",(t,n)=>e(t,n)),j=a("onupdate",(t,n)=>{const[o,a]=r(n);n.style.transition="",n.style.transform=`translate(${o}px, ${a}px)`,setTimeout(o=>{e(t,n),n.style.transform="translate(0,0)",setTimeout(t=>{n.style.transform="",n.style.transition=""},t.time)})}),E=a("oncreate",(t,n)=>setTimeout(t=>r(n),t.ready));var S={change:I,enter:B,leave:t=>i(N(t),M(t)),move:t=>i(E(t),j(t)),group:function(t){return n=>(n.children.forEach(t),n)},combine:i};const U=(()=>{const{combine:t,enter:n,leave:e}=S;var o,a=t=>({name:"slide-"+o,easing:"ease-in-out",time:400,ready:500});return r=>(o=r,t(n(a),e(a)))})();var G=({name:n,direction:e,next:o},a)=>U(e)(t("div",{class:"page",key:n},[].concat(a,H(o))));const[R,D,O]=f("ul, li, p"),P=[{value:0,icon:"noFace",label:"No Vote",extra:"I don't want to participate."},{value:5,icon:"veryHappyFace",label:"Very Happy",extra:"It should always be this way!"},{value:4,icon:"happyFace",label:"Happy",extra:"It can always get better!"},{value:3,icon:"uncertainFace",label:"Don't know",extra:"Meh... / Mixed feelings"},{value:2,icon:"unhappyFace",label:"Unhappy",extra:"A lot needs to change!"},{value:1,icon:"veryUnhappyFace",label:"Very Unhappy",extra:"Why even bother..."}];var W=({value:t,set:n})=>R({class:"option-selector"},P.map(({value:e,icon:o,label:a,extra:r})=>D({onmousedown:t=>n(e),ontouchstart:t=>n(e),class:e===t?"active":""},[V({name:o}),O({class:"label"},[a]),O({class:"extra"},[r])])));const X=({sum:t,count:n})=>0===n?"":""+Math.round(10*t/n)/10;var q=n=>t("p",{class:"result-display"},[X(n)]);const J={initial:({navigation:t,votes:n})=>G({name:"initial",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"start",direction:"forward",extra:"Tap here to...",text:"Start"}},[d(0,["Happiness Index Calculator"])]),start:({navigation:t,votes:n})=>G({name:"start",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"vote",direction:"forward",extra:"When you're ready, tap here to...",text:"Vote"}},[d(0,["Please hand the phone to the first person to vote."])]),vote:({navigation:t,votes:n})=>G({name:"vote",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"pass",direction:"forward",extra:"Make your selection, then tap here to...",text:"Cast Vote",onGo:n.actions.commit}},[d(0,["How happy are you about your job?"]),W({value:n.state.current,set:n.actions.set})]),pass:({navigation:t,votes:n})=>G({name:"pass",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"vote",direction:"back",extra:"Are you the next person? Tap here to...",text:"Vote"}},[H({goTo:t.actions.goTo,target:"result",direction:"forward",extra:"Has everyone voted? Tap here to...",text:"Check Result"}),d(0,["Thank you! Now, please hand the phone to the next person."])]),result:({navigation:t,votes:n})=>G({name:"result",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"reset",direction:"forward",extra:"Need to do it again? Tap here to...",text:"Reset Votes",onGo:n.actions.reset}},[d(0,["Happiness Index",q({count:n.state.count,sum:n.state.sum})])]),reset:({navigation:t,votes:n})=>G({name:"reset",direction:t.state.direction,next:{goTo:t.actions.goTo,target:"start",direction:"back",extra:"Tap here to...",text:"Start again"}},[d(0,["Votes cleared from memory",q({count:n.state.count,sum:n.state.sum})])])};var K=({votes:t,navigation:n})=>J[n.state.current]({votes:t,navigation:n});const Q=(t,n,e)=>({state:n[t],actions:e[t]});!function(n,e){function o(){n.view&&!h&&requestAnimationFrame(a,h=!h)}function a(){r(b=v(e,b,w,w=n.view(y,x),h=!h))}function r(t){for(;t=k.pop();)t()}function i(n,e){return n&&t(n.tagName.toLowerCase(),{},e.call(n.childNodes,function(t){return 3===t.nodeType?t.nodeValue:i(t,e)}))}function s(t,n,e){t.init&&k.push(function(){t.init(n,e)}),l(n,t.state),c(n,e,t.actions);for(var o in t.modules)s(t.modules[o],n[o]={},e[o]={})}function c(t,n,e){function a(n){return"function"==typeof n?a(n(t)):n&&o(l(t,n)),t}Object.keys(e||{}).map(function(o){"function"==typeof e[o]?n[o]=function(r){return"function"==typeof(r=e[o](t,n,r))?r(a):a(r)}:c(t[o]||(t[o]={}),n[o]={},e[o])})}function l(t,n){for(var e in n)t[e]=n[e];return t}function u(t,n){return l(l({},t),n)}function p(t,n){if("string"==typeof t)e=document.createTextNode(t);else{var e=(n=n||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(t.props&&t.props.oncreate&&k.push(function(){t.props.oncreate(e)}),o=0;o<t.children.length;o++)e.appendChild(p(t.children[o],n));for(var o in t.props)d(e,o,t.props[o])}return e}function d(t,n,e,o){if("key"===n);else if("style"===n)for(var n in u(o,e=e||{}))t.style[n]=e[n]||"";else{try{t[n]=e}catch(t){}"function"!=typeof e&&(e?t.setAttribute(n,e):t.removeAttribute(n))}}function f(t,n,e){for(var o in u(n,e)){var a=e[o],r="value"===o||"checked"===o?t[o]:n[o];a!==r&&a!==r&&d(t,o,a,r)}e&&e.onupdate&&k.push(function(){e.onupdate(t,n)})}function m(t,n,e){function o(){t.removeChild(n)}e&&e.onremove&&"function"==typeof(e=e.onremove(n))?e(o):o()}function g(t){if(t&&t.props)return t.props.key}function v(t,n,e,o,a,r){if(null==e)n=t.insertBefore(p(o,a),n);else if(null!=o.type&&o.type===e.type){f(n,e.props,o.props),a=a||"svg"===o.type;for(var i=o.children.length,s=e.children.length,c={},l=[],u={},d=0;d<s;d++)y=l[d]=n.childNodes[d],null!=(T=g(x=e.children[d]))&&(c[T]=[y,x]);for(var d=0,h=0;h<i;){var y=l[d],x=e.children[d],b=o.children[h];if(u[T=g(x)])d++;else{var w=g(b),k=c[w]||[];null==w?(null==T&&(v(n,y,x,b,a),h++),d++):(T===w?(v(n,k[0],k[1],b,a),d++):k[0]?(n.insertBefore(k[0],y),v(n,k[0],k[1],b,a)):v(n,y,null,b,a),h++,u[w]=b)}}for(;d<s;){var T=g(x=e.children[d]);null==T&&m(n,l[d],x.props),d++}for(var d in c){var $=(k=c[d])[1];u[$.props.key]||m(n,k[0],$.props)}}else n&&o!==n.nodeValue&&("string"==typeof o&&"string"==typeof e?n.nodeValue=o:(n=t.insertBefore(p(o,a),r=n),m(t,r,e.props)));return n}var h,y,x,b=(e=e||document.body).children[0],w=i(b,[].map),k=[];o(r(s(n,y={},x={})))}({modules:{votes:l,navigation:u},view:(t,n)=>p(0,K({votes:Q("votes",t,n),navigation:Q("navigation",t,n)}))})}();
